<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 3.9.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"blog.suqir.xyz",root:"/",scheme:"Gemini",version:"7.7.2",exturl:!1,sidebar:{position:"right",display:"hide",padding:18,offset:12,onmobile:!0},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"button",active:"gitalk",storage:!0,lazyload:!1,nav:null,activeClass:"gitalk"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="据我所知，妹子图（www.mzitu.com）是很多人学习爬虫的必爬网站之一，而我在进入站点后发现他还提供安卓客户端，因此决定分析一下其APP。本文涉及frida工具的使用、360加固应用的简单脱壳、APICloud本地资源的解密和xposed应用的编写等，干货满满！"><meta name="keywords" content="博客,苏乞儿,suqir"><meta property="og:type" content="article"><meta property="og:title" content="对妹子图APP的逆向分析"><meta property="og:url" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/index.html"><meta property="og:site_name" content="苏乞儿&#39;s Blog"><meta property="og:description" content="据我所知，妹子图（www.mzitu.com）是很多人学习爬虫的必爬网站之一，而我在进入站点后发现他还提供安卓客户端，因此决定分析一下其APP。本文涉及frida工具的使用、360加固应用的简单脱壳、APICloud本地资源的解密和xposed应用的编写等，干货满满！"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/1.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/2.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/3.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/4.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/5.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/6.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/7.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/8.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/10.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/9.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/11.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/12.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/13.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/14.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/15.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/16.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/17.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/18.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/E:/Blog/source/_posts/对妹子图APP的逆向分析/19.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/20.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/21.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/24.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/22.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/23.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/25.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/26.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/27.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/28.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/29.png"><meta property="og:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/30.png"><meta property="og:updated_time" content="2020-05-03T14:09:05.346Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="对妹子图APP的逆向分析"><meta name="twitter:description" content="据我所知，妹子图（www.mzitu.com）是很多人学习爬虫的必爬网站之一，而我在进入站点后发现他还提供安卓客户端，因此决定分析一下其APP。本文涉及frida工具的使用、360加固应用的简单脱壳、APICloud本地资源的解密和xposed应用的编写等，干货满满！"><meta name="twitter:image" content="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/1.png"><link rel="canonical" href="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>对妹子图APP的逆向分析 | 苏乞儿's Blog</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="苏乞儿's Blog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">苏乞儿's Blog</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">人生一世，草木一秋</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档<span class="badge">24</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类<span class="badge">4</span></a></li><li class="menu-item menu-item-网课宝"><a href="http://wk.suqir.xyz/" rel="noopener" target="_blank"><i class="fa fa-fw fa-calendar"></i> 网课宝</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.suqir.xyz/2020/05/01/对妹子图APP的逆向分析/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="http://q.qlogo.cn/headimg_dl?dst_uin=977265215&spec=100"><meta itemprop="name" content="苏乞儿"><meta itemprop="description" content="分享一切好玩的事情！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="苏乞儿's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">对妹子图APP的逆向分析</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-05-01 18:08:44" itemprop="dateCreated datePublished" datetime="2020-05-01T18:08:44+08:00">2020-05-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-05-03 22:09:05" itemprop="dateModified" datetime="2020-05-03T22:09:05+08:00">2020-05-03</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/逆向分析/" itemprop="url" rel="index"><span itemprop="name">逆向分析</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>6.5k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>6 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>据我所知，妹子图（<a href="http://www.mzitu.com）是很多人学习爬虫的必爬网站之一，而我在进入站点后发现他还提供安卓客户端，因此决定分析一下其APP。本文涉及frida工具的使用、360加固应用的简单脱壳、APICloud本地资源的解密和xposed应用的编写等，干货满满！" target="_blank" rel="noopener">www.mzitu.com）是很多人学习爬虫的必爬网站之一，而我在进入站点后发现他还提供安卓客户端，因此决定分析一下其APP。本文涉及frida工具的使用、360加固应用的简单脱壳、APICloud本地资源的解密和xposed应用的编写等，干货满满！</a></p><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>作为Python的初学者，若想要锻炼自己的代码能力，爬虫肯定是入门的不二选择，通过爬虫既能熟悉语法，又能提高自己的逻辑能力和一些网络编程的技术</p><p>但本文不会重点介绍爬虫的知识，本文重点将放在对APP的逆向分析上，因为APP请求的是接口，已经不属于爬虫的范围里了</p><p>如果你已经打开了这个网站，或是已经安装好了这个APP，求求你们，请一定要把持住自己</p><p>下面开始发车</p><h1 id="抓包分析"><a href="#抓包分析" class="headerlink" title="抓包分析"></a>抓包分析</h1><p>逆向分析的时候，个人习惯第一步先抓包看看数据的内容。这里使用HttpCanary进行抓包：</p><table><thead><tr><th style="text-align:center">请求</th><th style="text-align:center">响应</th></tr></thead><tbody><tr><td style="text-align:center"><img src="/2020/05/01/对妹子图APP的逆向分析/1.png" alt="请求"></td><td style="text-align:center"><img src="/2020/05/01/对妹子图APP的逆向分析/2.png" alt="响应"></td></tr></tbody></table><p>通过抓包可以知道：</p><ul><li>请求头必须设置Referer：<code>https://app.mmzztt.com</code>(实际上是后面分析得到，这里略过)</li><li>响应体是json类型，且list字段被某种加密加密过了，后面需要重点分析</li></ul><h1 id="初步分析APP"><a href="#初步分析APP" class="headerlink" title="初步分析APP"></a>初步分析APP</h1><p>想要知道如何解密服务器返回的数据，看来只能逆向APP分析了</p><p>首先拖入jadx工具中看下代码结构：</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/3.png" alt="jadx"></p><ul><li><p>看到<code>com.qihoo.util</code>和<code>com.stub</code>出现就知道应用被360加固过了，想要继续分析其代码部分则需要进行脱壳</p></li><li><p>同时还注意到其assets中疑似有网页资源文件，且文件内容被加密了：</p></li></ul><p><img src="/2020/05/01/对妹子图APP的逆向分析/4.png" alt="assets"></p><h1 id="脱壳"><a href="#脱壳" class="headerlink" title="脱壳"></a>脱壳</h1><p>对360加固的应用进行脱壳网上已经有比较成熟的方案了，我这里使用<code>天鉴</code>这款App对其进行脱壳，由于篇幅原因，关于360的脱壳有时间我将另写一篇文章分析</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/5.png" alt="脱壳后的文件"></p><p>脱出来的dex文件重命名为<code>classes.dex</code>拖进jadx中分析其代码：</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/6.png" alt="脱壳后的dex"></p><p>现在就可以看到其完整的代码了</p><p>重新查看代码结构：</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/7.png" alt="apicloud"></p><p><img src="/2020/05/01/对妹子图APP的逆向分析/8.png" alt="uzmap"></p><p>发现该app使用了apicloud开发</p><p>APICLOUD简单来说就是：APICloud实现安卓框架，自己开发web就好了</p><p>所以app的主要逻辑基本都在js文件中，java代码知识个壳子，所以我们必须要对app的本地网页资源进行解密</p><h1 id="解密本地资源"><a href="#解密本地资源" class="headerlink" title="解密本地资源"></a>解密本地资源</h1><p>要知道，如果APP的文件被加密了是不能直接运行的，必须通过代码在开始运行前进行解密，这也是我们能够逆向解密它的一个关键</p><p>这里参考看雪帖子：<a href="https://bbs.pediy.com/thread-249457.htm" target="_blank" rel="noopener">APICloud解密本地资源到逆向APP算法到通用资源解密</a></p><p>我们现在有两个方法获得解密后的本地资源：</p><ol><li>分析源码，编写js脚本，使用frida去hook关键函数得到解密后的文件内容</li><li>使用看雪帖子中的通用解密代码，编写xposed hook应用来dump文件</li></ol><h2 id="方法一-使用Frida直接Hook关键函数"><a href="#方法一-使用Frida直接Hook关键函数" class="headerlink" title="方法一 使用Frida直接Hook关键函数"></a>方法一 使用Frida直接Hook关键函数</h2><h3 id="分析源代码"><a href="#分析源代码" class="headerlink" title="分析源代码"></a>分析源代码</h3><p>首先找到拦截本地文件关键函数<code>WebViewClient.shouldInterceptRequest</code>，在jadx中搜索<code>shouldInterceptRequest</code>：</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/10.png" alt="search"></p><p>点进去：</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/9.png" alt="shouldInterceptRequest"></p><p>分析这段代码：</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/11.png" alt="if"></p><p>跟进b.e():</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/12.png" alt="b.d"></p><p>继续跟进v.d():</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/13.png" alt="v.d"></p><p>可知这是判断是否是需要进行管理的文件</p><p>回到<code>shouldInterceptRequest</code>，this.b和this.a分别处理这两种情况：</p><table><thead><tr><th>需要管理文件时</th><th>不需要管理文件时</th></tr></thead><tbody><tr><td><img src="/2020/05/01/对妹子图APP的逆向分析/14.png" alt="需要管理"></td><td><img src="/2020/05/01/对妹子图APP的逆向分析/15.png" alt="不需要处理"></td></tr></tbody></table><p>到了这里 SDK 接管资源的痕迹就很明显了,再往下我相信可以找到怎么加载&amp;解密文件 但是我的目的只是dump出原来的明文资源就好,到这里就可以停止了</p><p>注意这两个方法的返回都类似于：<code>return new j(c, new com.uzmap.pkg.uzcore.e.d(a2, a));</code></p><p>跟进j():</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/16.png" alt="j()"></p><p>这是<code>WebResourceResponse(String mimeType, String encoding,InputStream data)</code>的实现</p><p>再往下就是WebView内部了,SDK也没法做什么改变了,相信<code>InputStream</code>就是标准的数据了,所以从<code>new com.uzmap.pkg.uzcore.e.d(a2, a)</code>入手用Frida来Hook出数据看一下</p><h3 id="Frida脚本"><a href="#Frida脚本" class="headerlink" title="Frida脚本"></a>Frida脚本</h3><p>Frida的安装和配置就不多说了，百度都有的，这里不再赘述</p><p><strong>python</strong>（基本都是固定写法，没太多要讲的）：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> frida</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义回调函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_message</span><span class="params">(message, data)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> message[<span class="string">'type'</span>] == <span class="string">'send'</span>:</span><br><span class="line">        print(<span class="string">"[*] &#123;0&#125;"</span>.format(message[<span class="string">'payload'</span>]))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(message)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># hook代码，采用js编写</span></span><br><span class="line">file = open(<span class="string">"meizitu.js"</span>, encoding=<span class="string">"utf-8"</span>)</span><br><span class="line">jscode = file.read()</span><br><span class="line"><span class="comment"># 配置设备</span></span><br><span class="line">device = frida.get_remote_device()</span><br><span class="line">pid = device.spawn([<span class="string">"com.kmw.chemeizu"</span>])</span><br><span class="line">device.resume(pid)</span><br><span class="line">session = device.attach(pid)</span><br><span class="line">script = session.create_script(jscode)</span><br><span class="line">script.on(<span class="string">'message'</span>, on_message)</span><br><span class="line">script.load()</span><br><span class="line"><span class="comment"># 暂停脚本，不让程序运行完成退出</span></span><br><span class="line">sys.stdin.read()</span><br></pre></td></tr></table></figure><p><strong>JavaScript</strong>（重点）:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解密本地资源</span></span><br><span class="line">Java.perform(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> javaString = Java.use(<span class="string">"java.lang.String"</span>);</span><br><span class="line">    <span class="comment">// 混淆后需要hook的类名</span></span><br><span class="line">    <span class="keyword">var</span> resource = Java.use(<span class="string">"com.uzmap.pkg.uzcore.e.d"</span>);</span><br><span class="line">    resource.$init.overload(<span class="string">"[B"</span>, <span class="string">"java.lang.String"</span>).implementation = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> bytes = javaString.$<span class="keyword">new</span>(x);</span><br><span class="line">        send(<span class="string">"文件名:"</span> + y);</span><br><span class="line">        send(<span class="string">"文件内容:"</span> + bytes);</span><br><span class="line">        <span class="keyword">this</span>.$init(x, y);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>运行结果</strong>：</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/17.png" alt="运行结果"></p><p>这样就看到解密后的资源了</p><h2 id="方法二-编写Xposed-通用解密程序"><a href="#方法二-编写Xposed-通用解密程序" class="headerlink" title="方法二 编写Xposed 通用解密程序"></a>方法二 编写Xposed 通用解密程序</h2><p>上面的代码分析提到，这类程序到最后都会交给Android系统底层的<code>android.webkit.WebResourceResponse</code>类进行网页文件的处理，所以制作通用资源解密程序就可直接Hook这个类来实现</p><p>当然也可以用Frida工具实现（Frida工具太强大了），这里介绍另一个Hook方式：自己编写Xposed程序来实现</p><ol><li>首先用Android Studio新建一个工程，这个应用不需要用户界面，所以我选择了<code>Add No Activity</code>：</li></ol><p><img src="/2020/05/01/对妹子图APP的逆向分析/18.png" alt="addnoactivity"></p><p><img src="/2020/05/01/对妹子图APP的逆向分析/E:/Blog\source\_posts\对妹子图APP的逆向分析\19.png" alt=""></p><ol start="2"><li>添加依赖<code>de.robv.android.xposed:api:53</code>(根据实际需要选择api版本，这里选择53，它低支持在Android4.x系统上运行)：</li></ol><p><img src="/2020/05/01/对妹子图APP的逆向分析/20.png" alt="20"></p><ol start="3"><li>新建Hook类，并实现<code>IXposedHookLoadPackage</code>这个接口，并实现<code>handleLoadPackage</code>方法：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hook</span> <span class="keyword">implements</span> <span class="title">IXposedHookLoadPackage</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleLoadPackage</span><span class="params">(XC_LoadPackage.LoadPackageParam lpparam)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        ···</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>下面编写hook方法和保存文件的方法：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleLoadPackage</span><span class="params">(XC_LoadPackage.LoadPackageParam lpparam)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">    <span class="comment">// 首先应过滤包名，只Hook某个个应用。这里用于通用解密就不用过滤了，解密后将模块停止就不会造成内存浪费了</span></span><br><span class="line">    <span class="comment">// if (lpparam.packageName.equals("com.kmw.chemeizu"))&#123;</span></span><br><span class="line">        XposedBridge.log(<span class="string">"开始Hook..."</span>);</span><br><span class="line">        XposedHelpers.findAndHookConstructor(WebResourceResponse.class, String.class, String.class, InputStream.class, <span class="keyword">new</span> XC_MethodHook() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">afterHookedMethod</span><span class="params">(MethodHookParam param)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                <span class="keyword">super</span>.afterHookedMethod(param);</span><br><span class="line">                XposedBridge.log(<span class="string">"开始dump数据"</span>);</span><br><span class="line">                String mime = (String) param.args[<span class="number">0</span>];</span><br><span class="line">                Object obj = param.args[<span class="number">2</span>];</span><br><span class="line">                Field[] fields = obj.getClass().getDeclaredFields();</span><br><span class="line"></span><br><span class="line">                String fileName = <span class="string">""</span>;</span><br><span class="line">                <span class="keyword">byte</span>[] buffer = <span class="string">"没有解密数据"</span>.getBytes(StandardCharsets.UTF_8);</span><br><span class="line">                <span class="keyword">for</span> (Field field : fields) &#123;</span><br><span class="line">                    String name = field.getName();</span><br><span class="line">                    String type = field.getGenericType().toString();</span><br><span class="line">                    <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"class [B"</span>:</span><br><span class="line">                            buffer = (<span class="keyword">byte</span>[]) XposedHelpers.getObjectField(obj, name);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">"class java.lang.String"</span>:</span><br><span class="line">                            fileName = (String) XposedHelpers.getObjectField(obj, name);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (!fileName.equals(<span class="string">""</span>)||mime.equals(<span class="string">"null"</span>)) &#123;</span><br><span class="line">                    saveFile(buffer, fileName);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将会保存解密后的文件到/data/data/应用包名/files/decrypt/目录下</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">saveFile</span><span class="params">(<span class="keyword">byte</span>[] buffer, String fileName)</span> </span>&#123;</span><br><span class="line">    String baseDir = AndroidAppHelper.currentApplication().getFilesDir().getPath();</span><br><span class="line">    String filePath = baseDir + <span class="string">"/decrypt"</span> + fileName.replace(<span class="string">"file://"</span>, <span class="string">""</span>);</span><br><span class="line">    XposedBridge.log(<span class="string">"save file: "</span> + filePath);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        File file = <span class="keyword">new</span> File(filePath);</span><br><span class="line">        <span class="keyword">if</span> (!file.getParentFile().exists()) &#123;</span><br><span class="line">            file.getParentFile().mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        FileOutputStream out = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">        out.write(buffer);</span><br><span class="line">        out.close();</span><br><span class="line">        XposedBridge.log(<span class="string">"保存成功"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        XposedBridge.log(<span class="string">"保存文件出错"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>修改<code>AndroidManifest.xml</code>文件，在application标签下新增：</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">	<span class="attr">android:name</span>=<span class="string">"xposedmodule"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">android:value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">	<span class="attr">android:name</span>=<span class="string">"xposeddescription"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">android:value</span>=<span class="string">"一个用于解密apicloud本地资源的工具 -by 苏乞儿"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">	<span class="attr">android:name</span>=<span class="string">"xposedminversion"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">android:value</span>=<span class="string">"53"</span>/&gt;</span></span><br></pre></td></tr></table></figure><ol start="6"><li>新建<code>Assets Floder</code></li><li>在<code>Assets</code>文件夹下新建文本文件<code>xposed_init</code>，文件内容为你的Hook类路径:</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.suqir.android.fuckapicloud.Hook</span><br></pre></td></tr></table></figure><ol start="8"><li>由于程序没有Activity，所以不能直接通过点击运行按钮进行安装，我们使用<code>Build</code>-&gt;<code>Build bundle(s)/APK(s)</code>-&gt;<code>Build APK(s)</code>：</li></ol><p><img src="/2020/05/01/对妹子图APP的逆向分析/21.png" alt="21"></p><ol start="9"><li>Build完成后会在右下角出现提示，我们点击<code>location</code>打开文件所在的位置：</li></ol><p><img src="/2020/05/01/对妹子图APP的逆向分析/24.png" alt="apk文件"></p><ol start="10"><li>将apk文件安装到手机上：</li></ol><p><img src="/2020/05/01/对妹子图APP的逆向分析/22.png" alt="22"></p><p>我这里使用adb命令:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb install app-debug.apk</span><br></pre></td></tr></table></figure><ol start="11"><li>最后一步，在xposed管理器中激活模块，重启手机后打开妹子图app稍等一会就能在<code>/data/data/com.kmw.chemeizu/files/decrypt/</code>目录下找到解密后的文件了：</li></ol><p><img src="/2020/05/01/对妹子图APP的逆向分析/23.png" alt="解密后的文件内容"></p><p>经过与未加密的文件列表对比，发现并不是所有的加密文件都被dump出来，不过还好不影响我们后面的分析。但是从脱壳后的dex代码中分析，只要找到加密/解密的代码，我们自己写解密脚本也是可以的，那样就可以解密所有加密的文件，这里就不作分析了</p><h1 id="数据解密"><a href="#数据解密" class="headerlink" title="数据解密"></a>数据解密</h1><p>有了上一步的解密过的资源后，我们就能分析它的逻辑了</p><p>打开<code>list.js</code>文件发现以下代码：</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/25.png" alt="ajax"></p><p>这说明app每次请求数据都会在请求头中设置<code>Referer: &#39;https://app.mmzztt.com&#39;</code>，所以我们后面在写爬虫脚本的时候需要设置这个字段</p><p>我们现在的目的是想知道抓包抓到的list字段是如何解密的</p><p>同样在<code>list.js</code>文件中，发现可疑代码：</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/26.png" alt="26"></p><p>这是一段DES解密的代码，通过apicloud请求到的密钥key和偏移量iv来解密传入的data，这里并没有直接解密，而是将这些参数传递给java部分的方法<code>aesDecodeCBCSync</code>，让这个方法进行处理。所以我们打开jadx搜索这个方法：</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/27.png" alt="aesDecodeCBCSync"></p><p>点进去</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/28.png" alt="jsmethod"></p><p>发现解密方法<code>AESUtils.decrypt()</code>，跟进</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/29.png" alt="29"></p><p>在这里我们使用frida来Hook一下这个方法，看看处理结果是什么：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Java.perform(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> info = Java.use(<span class="string">"com.apicloud.signature.AESUtils"</span>);</span><br><span class="line">    info.decrypt.overload(<span class="string">"java.lang.String"</span>, <span class="string">"[B"</span>, <span class="string">"[B"</span>).implementation = <span class="function"><span class="keyword">function</span> (<span class="params">x, y,z</span>) </span>&#123;</span><br><span class="line">        send(<span class="string">"待解密:"</span> + x);</span><br><span class="line">        send(<span class="string">"key:"</span> + <span class="built_in">String</span>.fromCharCode.apply(<span class="built_in">String</span>, y));</span><br><span class="line">        send(<span class="string">"iv:"</span> + <span class="built_in">String</span>.fromCharCode.apply(<span class="built_in">String</span>, z));</span><br><span class="line">        <span class="keyword">var</span> res = <span class="keyword">this</span>.decrypt(x,y,z);</span><br><span class="line">        send(<span class="string">"结果:"</span> + res);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="/2020/05/01/对妹子图APP的逆向分析/30.png" alt="运行结果"></p><p>太棒了！通过hook这个方法，我们知道了服务器返回的数据确实是经过AES加密的，而且我们得到了密钥key和偏移量iv，这样我们就可以自己写数据的解密脚本来进行爬取服务器数据了，再一次感叹Frida工具的简单和强大！</p><h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>通过这一次的逆向分析，我学到了很多东西，比如Frida这个工具的简单上手、Xposed应用的开发、还有后面爬虫的一些细节处理。我始终相信，实战是对提升自己技术和能力的最好方法</p></div><div class="reward-container"><div>您的支持将鼓励我的创作！</div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="/images/wechatpay.png" alt="苏乞儿 微信支付"><p>微信支付</p></div><div style="display:inline-block"><img src="/images/alipay.png" alt="苏乞儿 支付宝"><p>支付宝</p></div></div></div><div class="followme"><p>欢迎关注我的其它发布渠道</p><div class="social-list"><div class="social-item"><a target="_blank" class="social-link" href="/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-item"><a href="/2020/04/21/Android开发学习笔记-25-HTTP与后台任务/" rel="prev" title="Android开发学习笔记-25-HTTP与后台任务"><i class="fa fa-chevron-left"></i> Android开发学习笔记-25-HTTP与后台任务</a></div><div class="post-nav-item"></div></div></footer></article></div></div><div class="comments" id="gitalk-container"></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#抓包分析"><span class="nav-number">2.</span> <span class="nav-text">抓包分析</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#初步分析APP"><span class="nav-number">3.</span> <span class="nav-text">初步分析APP</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#脱壳"><span class="nav-number">4.</span> <span class="nav-text">脱壳</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#解密本地资源"><span class="nav-number">5.</span> <span class="nav-text">解密本地资源</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#方法一-使用Frida直接Hook关键函数"><span class="nav-number">5.1.</span> <span class="nav-text">方法一 使用Frida直接Hook关键函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#分析源代码"><span class="nav-number">5.1.1.</span> <span class="nav-text">分析源代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Frida脚本"><span class="nav-number">5.1.2.</span> <span class="nav-text">Frida脚本</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法二-编写Xposed-通用解密程序"><span class="nav-number">5.2.</span> <span class="nav-text">方法二 编写Xposed 通用解密程序</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数据解密"><span class="nav-number">6.</span> <span class="nav-text">数据解密</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#结语"><span class="nav-number">7.</span> <span class="nav-text">结语</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="苏乞儿" src="http://q.qlogo.cn/headimg_dl?dst_uin=977265215&spec=100"><p class="site-author-name" itemprop="name">苏乞儿</p><div class="site-description" itemprop="description">分享一切好玩的事情！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">24</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">4</span> <span class="site-state-item-name">分类</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/suqir" title="GitHub → https://github.com/suqir" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://www.jianshu.com/u/d9abfae2e52a" title="简书 → https://www.jianshu.com/u/d9abfae2e52a" rel="noopener" target="_blank"><i class="fa fa-fw fa-book"></i> 简书</a></span><span class="links-of-author-item"><a href="mailto:977265215@qq.com" title="邮箱 → mailto:977265215@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> 邮箱</a></span><span class="links-of-author-item"><a href="https://weibo.com/6462953618" title="微博 → https://weibo.com/6462953618" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> 微博</a></span></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> 友情链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="http://suqir.xyz/" title="http://suqir.xyz/" rel="noopener" target="_blank">苏乞儿</a></li><li class="links-of-blogroll-item"><a href="http://qbce1999.club/" title="http://qbce1999.club/" rel="noopener" target="_blank">孤独的√3</a></li><li class="links-of-blogroll-item"><a href="http://lxlstudent.me/" title="http://lxlstudent.me/" rel="noopener" target="_blank">课本里的小亮</a></li><li class="links-of-blogroll-item"><a href="http://wk.suqir.xyz/" title="http://wk.suqir.xyz/" rel="noopener" target="_blank">网课宝</a></li></ul></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="http://www.beian.miit.gov.cn" rel="noopener" target="_blank">蜀ICP备20004417号</a> <img src="/images/gongan.png" style="display:inline-block"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=51132402000068" rel="noopener" target="_blank">川公网安备 51132402000068号</a></div><div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">苏乞儿</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">206k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">3:07</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"><script>NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '17bce98f83f452db5ed3',
      clientSecret: 'a5c04f8b71ef6aee7b3dec88eb40f08ce61b0169',
      repo        : 'suqir.github.io',
      owner       : 'suqir',
      admin       : ['suqir'],
      id          : 'febdaf6fdfbc49b28028f3071a55d837',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});</script></body></html>